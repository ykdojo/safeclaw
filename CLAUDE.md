<!-- Generated by Claude. May contain inaccuracies - verify before acting on this. -->

# Cloud deployment plan

Plan for making SafeClaw deployable to cloud environments.

## Simplify: remove Slack integration

Remove Slack for now to keep the scope small. Can be re-added later.

Files to change:

- **Remove:** `tools/slack-read.js`
- **Remove:** `setup/commands/slack.md`
- **Modify Dockerfile:** Remove `@slack/web-api` from the `npm install -g` line
- **Modify `scripts/run.sh`:** Remove the Slack token setup prompt (lines 31-91)
- **Modify `setup/CLAUDE.md`:** Remove Slack references
- Secrets sync script needs no changes - it syncs all files generically

## Authentication via environment variables

Locally, SafeClaw syncs credentials between host and container via `sync-config-and-secrets.sh`. In the cloud there's no host to sync from, so we use environment variables instead.

### Claude Code

- Run `claude setup-token` locally to generate a long-lived OAuth token (valid for 1 year, requires Claude subscription)
- Set `CLAUDE_CODE_OAUTH_TOKEN` environment variable in the cloud container
- Claude Code detects this automatically - no interactive login needed
- Uses your existing Claude subscription, not separate API billing

### GitHub CLI

- Run `gh auth token` locally to print your current authentication token
- Set `GH_TOKEN` environment variable in the cloud container
- `gh` detects this automatically - no `gh auth login` needed
- Alternatively, generate a Personal Access Token at https://github.com/settings/tokens (fine-grained tokens let you scope to specific repos)

### How to pass env vars per cloud provider

- **Google Cloud Run:** `gcloud run deploy --set-env-vars` or Secret Manager references
- **Oracle Cloud:** Pass via `docker run -e` or use OCI Vault
- **Render:** Dashboard > Environment > Environment Variables
- **Any Docker host:** `docker run -e CLAUDE_CODE_OAUTH_TOKEN=... -e GH_TOKEN=...`

## Implementation changes

- **Modify Dockerfile:** Document `CLAUDE_CODE_OAUTH_TOKEN` and `GH_TOKEN` as expected env vars (no defaults baked in)
- **Modify `scripts/run.sh`:** For cloud mode, pass env vars via `docker run -e` instead of relying on credential sync
- **Keep sync scripts:** Still useful for local development, but cloud deployments will use env vars instead
